const ONE_HOUR=36e5,checkLastSent=()=>{let e=localStorage.getItem("lastSent");if(!e)return!0;let t=new Date().getTime(),n=new Date(e).getTime();return t-n>36e5},updateLastSent=()=>{localStorage.setItem("lastSent",new Date().toISOString())},getDeviceType=()=>{let e=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"mobile":/iPad/i.test(e)?"tablet":"desktop"},getIpAddress=async()=>await fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>e.ip);async function analytics(e,t){try{if(!checkLastSent())return;let n=await getIpAddress(),i={siteName:e,date:new Date().toISOString(),screenSize:{width:window.innerWidth,height:window.innerHeight},deviceType:getDeviceType(),ipAddress:n},a=await fetch("https://astro-server-z1u9.onrender.com/traffic-data",{method:"POST",headers:{"Content-Type":"application/json","X-Client-ID":t},body:JSON.stringify(i)});if(!a.ok)throw Error(`Error sending data to the server: ${a.statusText}`);updateLastSent()}catch(r){console.error(r)}}"undefined"!=typeof module&&module.exports?module.exports=analytics:"undefined"!=typeof window&&(window.analytics=analytics);